<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Frasers Interview MMI Generator</title>
  <meta name="description" content="Frasers Interview MMI Generator">
  <meta name="author" content="Frasers Interview">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- Reference to JS files in the js/ folder -->
  <script src="js/csvjson.js"></script>
  <script src="js/csi.min.js"></script>
  <script src="js/script.js"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- JQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <!-- Link to the CSS file in the css/ folder -->
  <link rel="stylesheet" href="css/style.css?v=1.0">

  <script>
    // Dynamically filter options based on the opts array
    let opts = [
      ["ANU", "Bond", "Curtin", "Deakin", "Flinders", "Griffith", "JCU", "Macquarie", "Monash", "Newcastle", "UNDF/UNDS", "Adelaide", "Melbourne", "Sydney", "Wollongong", "Western Australia", "Western Sydney", "UQ"],
      ["Personal", "Medical School", "Public Health", "Rural Health", "Indigenous Health", "Medical Ethics", "Teamwork", "Cultural Respect", "Decision Making", "Communication", "University Specifics", "Emotional Scenarios", "Acting Stations", "Practical Skills", "Detach", "Video Stations", "Portfolio Stations", "Picture Stations", "Cultural Awareness"],
      ["Motivation", "Strengths and Weaknesses", "Experience", "Structure", "Resource Allocation", "Opinion", "Confidentiality", "Autonomy", "Justice", "Conflict", "Heirarchy", "Empathy", "Bad News", "Infographic", "Approach to Problem", "Detach", "Explaining Reasoning", "Exploring Motivations", "Understanding Issue", "Displaying Empathy", "Conflict Resolution", "Problem Solving", "Self Care", "Self Awareness", "Leadership", "Risk Assessment", "Beneficence", "Non-Maleficence"]
    ];

    function initializeDropdowns() {
      // Populate the first dropdown (universities)
      const uniSelect = document.getElementById('uni');
      uniSelect.innerHTML = '<option value="">Select a University</option>';
      opts[0].forEach(option => {
        uniSelect.add(new Option(option, option));
      });

      // Reset subsequent dropdowns
      document.getElementById('topic').innerHTML = '<option value="">Select a Category</option>';
      document.getElementById('subTop').innerHTML = '<option value="">Select a Subcategory</option>';
    }

    function filterDropdown(level) {
      if (level === 0) {
        // University selected, enable category dropdown
        const topicSelect = document.getElementById('topic');
        topicSelect.innerHTML = '<option value="">Select a Category</option>';
        opts[1].forEach(option => {
          topicSelect.add(new Option(option, option));
        });

        // Reset subcategory dropdown
        document.getElementById('subTop').innerHTML = '<option value="">Select a Subcategory</option>';
      } else if (level === 1) {
        // Category selected, enable subcategory dropdown
        const subTopSelect = document.getElementById('subTop');
        subTopSelect.innerHTML = '<option value="">Select a Subcategory</option>';
        opts[2].forEach(option => {
          subTopSelect.add(new Option(option, option));
        });
      }
    }

    // Automatically initialize the dropdowns on page load
    window.onload = initializeDropdowns;
  </script>
</head>

<body>
  <div class="center">
    <div class="selectionField">
      <span class="selection">
        <h2>University</h2>
        <select id="uni" onchange="filterDropdown(0)">
        </select>
      </span>
      <span class="selection">
        <h2>Category</h2>
        <select id="topic" onchange="filterDropdown(1)">
        </select>
      </span>
      <span class="selection">
        <h2>Subcategory</h2>
        <select id="subTop">
        </select>
      </span>
      <span class="buttons">
        <button onclick="getStation()" class="big"> Generate MMI Station </button> <br>
        <button onclick="initializeDropdowns()" class="reset"> Reset </button>
      </span>
    </div>

    <div class="content" id="contentDiv">
      <p id="error"></p>
      <p id="station"></p>
      <p id="1"></p>
      <p id="2"></p>
      <p id="3"></p>
      <p id="4"></p>
    </div>
  </div>

  <!-- Button trigger modal for testing purpose -->
  <button type="button" class="btn btn-primary" 
          data-bs-toggle="modal" data-bs-target="#lead-gen-modal" id="openModal_btn"
          style="opacity: 0;">
    Launch demo modal
  </button>

  <!-- Modal -->
  <div class="modal fade" id="lead-gen-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body" data-include="./AC_Lead_Gen_form.html">
        </div>
      </div>
    </div>
  </div>
</body>

</html>
